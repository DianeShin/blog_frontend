{"ast":null,"code":"var _jsxFileName = \"/home/diane/Desktop/blog_frontend/src/pages/auth/Authenticator.js\",\n  _s = $RefreshSig$();\nimport React, { createContext, useEffect, useState } from \"react\";\nimport { getUserById } from \"./userHelper\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext(\"\");\nexport default _s(({\n  children\n}) => {\n  _s();\n  const [userId, setUserId] = useState(\"\");\n  useEffect(() => {\n    // fetch info\n    const userNameP = document.getElementById(\"userNameP\");\n    const userId = JSON.parse(sessionStorage.getItem('loginUserId'));\n    // if no userId, inform user to login.\n    if (!userId) userNameP.innerText = `Please log in!`;\n    // if userId, display logged-in user.\n    else {\n      getUserById(userId).then(userObj => {\n        if (userObj) userNameP.innerText = `Hello ${userObj.name}!`;\n        setUserId(userId);\n      });\n    }\n  }, [userId]);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      userId,\n      setUserId\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 9\n  }, this);\n}, \"cfelpo2yqFdyI0+mJl9KVIbUOAg=\");","map":{"version":3,"names":["React","createContext","useEffect","useState","getUserById","jsxDEV","_jsxDEV","AuthContext","_s","children","userId","setUserId","userNameP","document","getElementById","JSON","parse","sessionStorage","getItem","innerText","then","userObj","name","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["/home/diane/Desktop/blog_frontend/src/pages/auth/Authenticator.js"],"sourcesContent":["import React, {createContext, useEffect, useState} from \"react\";\nimport {getUserById} from \"./userHelper\";\n\nexport const AuthContext = createContext(\"\");\n\nexport default ({children}) => {\n    const [userId, setUserId] = useState(\"\");\n\n    useEffect(() => {\n        // fetch info\n        const userNameP = document.getElementById(\"userNameP\");\n        const userId = JSON.parse(sessionStorage.getItem('loginUserId'));\n        // if no userId, inform user to login.\n        if (!userId) userNameP.innerText = `Please log in!`;\n        // if userId, display logged-in user.\n        else{\n            getUserById(userId)\n                .then((userObj) => {\n                    if(userObj) userNameP.innerText = `Hello ${userObj.name}!`;\n                    setUserId(userId);\n                })\n        }\n\n\n    }, [userId]);\n\n    return(\n        <AuthContext.Provider\n            value={{\n                userId,\n                setUserId\n            }}>\n            {children}\n        </AuthContext.Provider>\n    );\n};"],"mappings":";;AAAA,OAAOA,KAAK,IAAGC,aAAa,EAAEC,SAAS,EAAEC,QAAQ,QAAO,OAAO;AAC/D,SAAQC,WAAW,QAAO,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEzC,OAAO,MAAMC,WAAW,gBAAGN,aAAa,CAAC,EAAE,CAAC;AAE5C,eAAAO,EAAA,CAAe,CAAC;EAACC;AAAQ,CAAC,KAAK;EAAAD,EAAA;EAC3B,MAAM,CAACE,MAAM,EAAEC,SAAS,CAAC,GAAGR,QAAQ,CAAC,EAAE,CAAC;EAExCD,SAAS,CAAC,MAAM;IACZ;IACA,MAAMU,SAAS,GAAGC,QAAQ,CAACC,cAAc,CAAC,WAAW,CAAC;IACtD,MAAMJ,MAAM,GAAGK,IAAI,CAACC,KAAK,CAACC,cAAc,CAACC,OAAO,CAAC,aAAa,CAAC,CAAC;IAChE;IACA,IAAI,CAACR,MAAM,EAAEE,SAAS,CAACO,SAAS,GAAI,gBAAe;IACnD;IAAA,KACI;MACAf,WAAW,CAACM,MAAM,CAAC,CACdU,IAAI,CAAEC,OAAO,IAAK;QACf,IAAGA,OAAO,EAAET,SAAS,CAACO,SAAS,GAAI,SAAQE,OAAO,CAACC,IAAK,GAAE;QAC1DX,SAAS,CAACD,MAAM,CAAC;MACrB,CAAC,CAAC;IACV;EAGJ,CAAC,EAAE,CAACA,MAAM,CAAC,CAAC;EAEZ,oBACIJ,OAAA,CAACC,WAAW,CAACgB,QAAQ;IACjBC,KAAK,EAAE;MACHd,MAAM;MACNC;IACJ,CAAE;IAAAF,QAAA,EACDA;EAAQ;IAAAgB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACS,CAAC;AAE/B,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}